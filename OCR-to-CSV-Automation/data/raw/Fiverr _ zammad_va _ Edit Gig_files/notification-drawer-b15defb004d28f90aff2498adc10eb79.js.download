!function(e){var t,i,n,r={consts:{FULL:"full",LOCAL:"local"},models:{c:Fiverr.models.context,b:Fiverr.models.browser,user:Fiverr.models.user,notifications:{url:"",boundClearMarks:!1,bindClearMarksRetryCount:0},fiverrFavicon:{pinned:"//assetsv2.fiverrcdn.com/assets/v2_realtime/favicon-notif-ad052f660a1c23f2f5fc1a3852698b98.gif",main:"/favicon.ico"}},selectors:{},init:function(){if(!i.b.isMobileResponsive){n.$favicon=e('link[rel*="icon"]');var r=t.getMarkedStatuses(),a=(new Date).getTime();r&&r.expires>a&&(useNewCounter=!1),this.updateCounter(t.consts.FULL),this.bindClearMarksOnClick()}},getMarkedStatuses:function(){return ft.utl.getLS("header_data_markers")},updateFavicon:function(e){n.$favicon.prop("href",e?i.fiverrFavicon.pinned:i.fiverrFavicon.main)},anyUnseenStatus:function(e){if(Fiverr.models.ps.fiverrRealTimeEnabled&&e){var i=e.markStatuses||null,n=e.mode||t.consts.FULL;if(!i){var r=t.getMarkedStatuses();if(!r)return;i=r.markedStatuses}var a=0,o=!1,l=!1;_.forOwn(i,function(e,t){return e?!1:void a++}),o=_.size(i)!==a,l&&t.updateFavicon(o),n===t.consts.FULL&&Fiverr._syncState({pinned:!0})}},updateCounter:function(i){var n=e(".js-mark"),i=i,a=(new Date).getTime(),o={notifications:!1,inbox:!1,todos:!1},l=function(i,n,r){i.length&&n&&(e.each(n,function(e,t){t?i.filter('[data-mark="'+e+'"]').addClass("marked"):i.filter('[data-mark="'+e+'"]').removeClass("marked")}),t.anyUnseenStatus({markStatuses:n,mode:r}))};if(!document.pageScope.hidePinnedFlashes){if(i===t.consts.LOCAL){var s=t.getMarkedStatuses();s&&l(n,s.markedStatuses,i)}else e.ajax({type:"get",url:"/header_data",dataType:"text",success:function(t){try{t=e.parseJSON(t)}catch(s){return setTimeout(function(){r.updateCounter(i)},6e4)}o.notifications=t.notifications_unseen,o.inbox=t.inbox_unseen,o.notifications&&!o.inbox&&(o.inbox=t.notifications_unseen),l(n,o,i),ft.utl.setLS("header_data_markers",{expires:a+6e4,markedStatuses:o})}});r.bindClearMarksOnClick()}},bindClearMarksOnClick:function(){var n=e(".js-mark").filter(function(){return-1===["notifications","inbox"].indexOf(e(this).data("mark"))}).find("> a"),a=t.getMarkedStatuses(),o=a?a.markedStatuses:!1;i.notifications.boundClearMarks||(o?(i.notifications.boundClearMarks=!0,n.on("click",function(i){i.preventDefault();var n=e(this),r=n.attr("href"),a=n.closest(".js-mark"),l=a.data("mark"),s=((new Date).getTime(),t.getMarkedStatuses());s&&(o=s.markedStatuses),o[l]=!1,ft.utl.setLS("header_data_markers",{expires:s.expires,markedStatuses:o}),t.anyUnseenStatus({markedStatuses:o,mode:t.consts.LOCAL}),a.removeClass("marked"),_.delay(function(){document.location.href=r},100)})):i.notifications.bindClearMarksRetryCount<=5&&_.delay(function(){r.bindClearMarksOnClick(),r.models.notifications.bindClearMarksRetryCount++},300))}};t=r,i=t.models,n=t.selectors,window.fNotifications=r,Fiverr.models.user&&r.init()}(jQuery),function(){var e={admin_cancelled_buyer:{group:"fullGig"},admin_cancelled_buyer_reviewable:{group:"fullGig"},seller_blocked_cancellation:{group:"fullGig"},seller_account_deleted_cancellation:{group:"fullGig"},blocked_seller_delivered_order:{group:"fullGig"},seller_account_deleted_delivered_order:{group:"fullGig"},blocked_or_deleted_seller_delivered_order:{group:"fullGig"},admin_cancelled_seller:{group:"fullGig"},auto_completed:{group:"fullGig"},buyer_extend_auto_completion_time:{group:"fullGig"},seller_extend_auto_completion_time:{group:"fullGig"},completed_by_seller:{group:"fullGig"},buyer_accepted_proposal:{group:"fullGig"},buyer_nudge:{group:"fullGig"},buyer_nudge_new_notifier:{group:"fullGig"},order_autocomplete_first_notice:{group:"fullGig"},order_autocompleted:{group:"fullGig"},provide_requirements_reminder:{group:"fullGig"},completed:{group:"fullGig"},completed_with_positive_review:{group:"fullGig"},custom:{customContent:!0,icon:"present"},delivered:{group:"fullGig"},delivered_new_notifier:{group:"fullGig"},redelivered_new_notifier:{group:"fullGig"},upsell_offered:{group:"fullGig"},seller_review_order_requirements:{group:"fullGig"},delivery_extended_autocomplete_time_to_seller:{icon:"bell"},deny_user_notif:{gigImage:!0,icon:"times",subCat:!0},featured_promotion:{gigImage:!0,icon:"ribbon",subCat:!0},handle_buyer_cancellation:{group:"fullGig"},handle_seller_cancellation:{group:"fullGig"},handle_seller_cancellation_reviewable:{group:"fullGig"},seller_fiverr_choice_order_started:{group:"fullGig"},handle_waiting_for_reqs:{group:"fullGig"},in_progress:{group:"fullGig"},in_progress_item:{group:"fullGig"},new_payment_milestone_ordered:{group:"fullGig"},in_progress_with_reqs:{group:"fullGig"},new_levels_system_notification:{icon:"ribbon"},level_up_notification:{icon:"ribbon"},level_down_notification:{icon:"ribbon"},level_trs_nominated_notification:{icon:"ribbon"},level_trs_kept_notification:{icon:"ribbon"},level_two_kept_notification:{icon:"ribbon"},try_live:{icon:"bell"},mutual_cancellation_request:{group:"fullGig"},mutual_cancellation_request_accepted:{group:"fullGig"},new_offer_notification_for_buyer:{group:"fullGig"},buyer_brief_notification_for_buyer_multi:{icon:"docs"},buyer_brief_notification_for_buyer_single:{icon:"docs"},buyer_brief_notification_for_buyer:{icon:"docs"},new_order_message:{gigImage:!0,userImage:!0,subCat:!0,textLong:!0},new_order_waiting_for_reqs_to_seller:{group:"fullGig"},new_user_notification:{icon:"docs"},order_created_mobile_notification_to_seller:{group:"fullGig"},order_resolution_no_reply_initiator:{group:"fullGig"},order_resolution_no_reply_responder:{group:"fullGig"},order_resolution_opened:{group:"fullGig"},order_resolution_opened_modify_feedback:{group:"fullGig"},order_resolution_reply_add_revisions_accepted:{group:"fullGig"},order_resolution_reply_add_revisions_declined:{group:"fullGig"},order_resolution_reply_extend_delivery_accepted:{group:"fullGig"},order_resolution_reply_extend_delivery_declined:{group:"fullGig"},order_resolution_reply_modify_feedback_accepted:{group:"fullGig"},order_resolution_reply_modify_feedback_declined:{group:"fullGig"},order_resolution_reply_modify_order_accepted:{group:"fullGig"},order_resolution_reply_modify_order_declined:{group:"fullGig"},order_resolution_reply_mutual_cancellaton_accepted:{group:"fullGig"},order_resolution_reply_mutual_cancellaton_declined:{group:"fullGig"},order_resolution_reply_personal_message_accepted:{group:"fullGig"},order_resolution_reply_personal_message_declined:{group:"fullGig"},order_resolution_reply_progress_update_submitted:{group:"fullGig"},order_resolution_withdrawn:{group:"fullGig"},order_updates:{group:"fullGig"},seller_order_complete_eligibility:{group:"fullGig"},seller_order_completed_makers_diy:{group:"fullGig"},prompt_user_change_password:{icon:"docs"},pro_seller_account_created:{icon:"docs"},welcome_back_from_ooo_mode:{icon:"suitcase"},your_seller_is_back_from_ooo_mode:{group:"fullGig"},gig_pro_toggled_on:{gigImage:!0,icon:"docs"},gig_pro_toggled_off:{gigImage:!0,icon:"docs"},redelivered:{group:"fullGig"},rejected:{group:"fullGig"},request_paused:{icon:"docs"},request_unapproved:{icon:"times"},shopping_balance_deposit:{icon:"present"},shopping_balance_deposit_pending:{icon:"present"},shopping_balance_deposit_share:{icon:"present"},soft_deny_user_notif:{gigImage:!0,icon:"pencil",subCat:!0},team_member_added:{icon:"docs"},tip_notification_for_seller:{group:"fullGig"},audio_file_deny:{gigImage:!0,icon:"pencil",subCat:!0},optional_phone_verification:{icon:"phone",customAction:!0},seller_skipped_requirements:{group:"fullGig"},available_now_time_left_reminder:{userImage:!0},byob_user_notification:{icon:"present"},profile_image_not_unique_warning:{icon:"pencil"},profile_image_not_unique_deleted:{icon:"pencil"},business_accounts_team_invitation_created:{icon:"team"},business_accounts_team_invitation_accepted_invitor:{icon:"member"},business_accounts_team_invitation_accepted_invitee:{icon:"team"},workspaces_team_invitation_created:{icon:"team"},workspaces_team_invitation_accepted:{icon:"member"},business_invitation_accepted:{icon:"team"},business_project_created:{icon:"team"},business_project_reactivated:{icon:"team"},business_project_archived:{icon:"team"},business_project_deleted:{icon:"team"},business_project_renamed:{icon:"team"},business_project_member_added:{icon:"member"},business_project_member_removed:{icon:"member"},business_policy_purchase_request_created:{icon:"member",userImage:!0},business_policy_purchase_request_approved:{icon:"member",userImage:!0,gigImage:!0},business_policy_add_payment_method_request_created:{icon:"member",userImage:!0},business_policy_add_payment_method_request_approved:{icon:"member",userImage:!0,gigImage:!0},business_admin_assigned:{icon:"bell"},business_financial_manager_assigned:{icon:"bell"},business_member_assigned:{icon:"bell"},business_order_created:{icon:"team"},and_co_announcement:{icon:"present"},buyer_profile_reminder:{icon:"form"},external_source_notification:{dynamicIcon:!0},admin_moved_gig:{icon:"pencil"},notify_user_on_referral_registration:{icon:"present"},id_verification_passed:{icon:"bell"},id_verification_failed:{icon:"bell"},id_verification_restrict_user_multiple_attempts:{icon:"bell"},id_verification_restrict_user_verification_period_expired:{icon:"bell"},id_verification_indecisive_try_again:{icon:"bell"},id_verification_indecisive_max_tries:{icon:"bell"},id_verification_document_unrecognized:{icon:"bell"},id_verification_low_quality:{icon:"bell"},id_verification_non_id:{icon:"bell"},trigger_id_verification:{icon:"bell"},eligible_for_deposit_with_cc:{icon:"bell"},seller_order_started_acknowledgement:{group:"fullGig"},seo_restructure_announcement:{icon:"pencil"},gig_handpicked:{icon:"ribbon"},seller_delivery_reminder:{group:"fullGig"},delayed_private_review:{icon:"pencil"},buying_review_reminder:{icon:"form"},hidden_buying_review_created:{group:"fullGig"},hourly_order_mid_review:{icon:"bell"},hourly_order_end_review:{icon:"bell"},late_delivery_notification_to_seller:{group:"fullGig"},very_late_delivery_notification_to_seller:{group:"fullGig"},attachment_review_comments_submitted:{group:"fullGig"},external_attachment_review_comments_submitted:{gigImage:!0,subCat:!0},mfa_verification:{icon:"bell"},fiverr_credits_removed:{icon:"bell"},fiverr_credits_removed_no_date:{icon:"bell"},localized_fiverr_credits_removed:{icon:"bell"},localized_fiverr_credits_removed_no_date:{icon:"bell"},hourly_weekly_payment_failed:{icon:"bell"},hourly_weekly_payment_failed_seller:{icon:"bell"},hourly_weekly_report_pending_approval_seller:{icon:"bell"},hourly_weekly_report_approved_seller:{icon:"bell"},hourly_weekly_report_review_and_approve_buyer:{icon:"bell"},hourly_weekly_report_still_pending_approval_buyer:{icon:"bell"},hourly_weekly_report_automatically_approved_buyer:{icon:"bell"},studio_invite_member:{gigImage:!0,userImage:!0},studio_member_joined:{gigImage:!0,userImage:!0},studio_member_declined:{gigImage:!0,userImage:!0},studio_gig_publishable:{gigImage:!0},studio_revoke_member:{gigImage:!0,userImage:!0},studio_order_payment_cleared:{icon:"bell",gigImage:!0},studio_member_unavailable:{gigImage:!0,userImage:!0},studio_order_started:{group:"studioOrder"},studio_order_cancelled:{group:"studioOrder"},studio_order_completed:{group:"studioOrder"},studio_order_tipped:{group:"studioOrder"},business_chat_added:{icon:"bell"},seller_complete_gig_information:{icon:"bell",gigImage:!0},tax_form_notice:{icon:"bell"},tax_form_pause_gigs_notice:{icon:"bell"},tax_form_pending_validation_notice:{icon:"bell"},tax_form_completed_notice:{icon:"bell"},tax_form_failed_notice:{icon:"bell"},tax_form_answer_reminder:{icon:"bell"},india_tax_seller_policy_initiated:{icon:"bell"},india_tax_seller_policy_expired:{icon:"bell"},india_tax_seller_policy_completed:{icon:"bell"},collections_created_list:{userImage:!0},collections_share_with_team:{userImage:!0},collections_deleted_list:{userImage:!0},collections_edited_name:{userImage:!0},collections_added_gig:{gigImage:!0},collections_added_seller:{userImage:!0},collections_removed_gig:{gigImage:!0},collections_removed_seller:{userImage:!0},start_next_milestone_first_reminder_to_buyer:{group:"fullGig"},start_next_milestone_first_reminder_to_seller:{group:"fullGig"},new_subscription_order_seller:{group:"fullGig"},subscription_payment_failed:{group:"fullGig"},subscription_subsequent_order_created_buyer:{group:"fullGig"},subscription_subsequent_order_created_seller:{group:"fullGig"},subscription_payment_failed_reminder:{group:"fullGig"},seller_coupon_notice:{userImage:!0},remaining_coupon_quota_singular:{icon:"bell"},remaining_coupon_quota_plural:{icon:"bell"},coupon_quota_refill:{icon:"bell"},snippet_settings_review_deleted:{icon:"bell"},snippet_settings_review_deleted_and_mode_changed_to_automated:{icon:"bell"},seller_plus_enrollment_started:{icon:"bell"},seller_plus_enrollment_ended:{icon:"bell"},workspace_earnings_exported:{icon:"bell"},promoted_gigs_unpromotable:{icon:"bell"},promoted_gigs_promotable_not_promoting:{icon:"bell"},promoted_gigs_promotable_promoting_single:{icon:"bell"},promoted_gigs_promotable_promoting_multi:{icon:"bell"},promoted_gigs_high_quality_sellers:{icon:"bell"},gig_gallery_tagging:{icon:"bell"},inbox_recommendations_dead_end:{icon:"bell"},buyer_requests_seller_notification:{icon:"bell"},brief_one_to_one_rejected_by_moderation:{icon:"bell"},brief_one_to_one_rejected_by_objectionable_content:{icon:"bell"},brief_one_to_one_rejected_by_product_violation:{icon:"bell"},brief_one_to_one_rejected_by_prohibited_services:{icon:"bell"},buyer_zoom_request:{icon:"bell"},offer_milestones_after_custom_offer:{icon:"bell"},delivered_order_buyer_autocompletion_reminder:{group:"fullGig"},post_order_cross_gig_recommendations:{icon:"bell"},seller_moderation_reason_multiple_reasons:{icon:"bell"},seller_moderation_reason_fiverr_badges:{icon:"bell"},seller_moderation_reason_unrepresentative_personal_photo:{icon:"bell"},seller_moderation_reason_copyright_violation:{icon:"bell"},seller_moderation_reason_contact_information:{icon:"bell"},seller_moderation_reason_objectionable_content:{icon:"bell"},seller_moderation_reason_prohibited_services:{icon:"bell"},blocked_seller_can_join_program:{icon:"bell"},certified_brief_created:{icon:"bell"},certified_meeting_confirmation:{icon:"bell"},certified_meeting_reminder:{icon:"bell"},selling_eligibility_not_eligible:{icon:"bell"},list_gigs_on_fib_marketplace:{icon:"bell"},expert_consultation_form:{icon:"bell"},budget_recommendations:{icon:"bell"},upgrade_with_ai_recommendations:{icon:"bell"},order_proactive_intervention_detected:{group:"fullGig"},order_proactive_intervention_help:{group:"fullGig"},buying_review_reminder:{group:"fullGig"},notable_client_declined:{icon:"bell"},order_resolution_partial_refund_opened:{group:"fullGig"},order_resolution_reply_partial_refund_accepted:{group:"fullGig"},order_resolution_reply_partial_refund_declined:{group:"fullGig"},order_resolution_partial_refund_withdrawn:{group:"fullGig"},order_resolution_partial_refund_no_reply_initiator:{group:"fullGig"},pro_invitation_accepted:{icon:"team"},pro_invitation_received:{userImage:!0},pro_admin_assigned:{icon:"team"},pro_billing_info_updated:{icon:"team"},pro_payment_way:{icon:"fiverr-pro"},dac_seven_valid:{icon:"bell"},dac_seven_invalid:{icon:"bell"},kybc_passed:{icon:"bell"},kybc_passed_existing_seller:{icon:"bell"},kybc_failed:{icon:"bell"},identity_verification_passed:{icon:"bell"},identity_verification_failed:{icon:"bell"},identity_verification_seller_profession_auth_failed:{icon:"bell"},tracking_reminder_first_week_starts:{icon:"bell"},tracking_reminder_2nd_week_starts:{icon:"bell"},tracking_reminder_3rd_week_starts:{icon:"bell"},hourly_order_completed_seller:{icon:"bell"},hourly_order_completed_buyer:{icon:"bell"},hourly_order_agreement_about_to_be_ended_seller:{icon:"bell"},hourly_order_agreement_about_to_be_ended_buyer:{icon:"bell"},order_activated:{icon:"bell"},hourly_limit_changed:{icon:"bell"},order_paused:{icon:"bell"},first_hours_tracked:{icon:"bell"},hourly_report_updated:{icon:"bell"},loyalty_credits_added:{icon:"bell"},loyalty_credits_expired:{icon:"bell"},loyalty_tier_upgrade_gold:{icon:"bell"},loyalty_tier_upgrade_platinum:{icon:"bell"},loyalty_tier_at_risk_downgrade:{icon:"bell"},tier_subscription_trial_started_for_existing_silver_client:{icon:"bell"},tier_subscription_trial_started_for_new_silver_client:{icon:"bell"},tier_subscription_tier_upgrade_to_gold_during_essential:{icon:"bell"},tier_subscription_tier_upgrade_to_platinum_during_essential:{icon:"bell"},tier_subscription_tier_upgrade_to_gold_during_trial:{icon:"bell"},tier_subscription_tier_upgrade_to_platinum_during_trial:{icon:"bell"},tier_subscription_payment_failure:{icon:"bell"},tier_subscription_member_requests_from_admin_to_subscribe_to_any_pro_plan:{icon:"bell"},tier_subscription_essential_total_spent_step_reached:{icon:"bell"},legal_documents_freelancer_signed_a_legal_document:{icon:"bell"},legal_documents_agency_signed_a_legal_document:{icon:"bell"},legal_documents_freelancer_need_to_sign_a_legal_document:{icon:"bell"},legal_documents_refund_essential_tier_when_a_document_is_removed:{icon:"bell"},workforce_classification_audit_requested_by_seller:{icon:"bell"},workforce_classification_audit_requested_by_buyer:{icon:"bell"},workforce_classification_audit_completed_by_seller:{icon:"bell"},workforce_classification_audit_completed_by_buyer:{icon:"bell"},workforce_classification_audit_expired_by_seller:{icon:"bell"},workforce_classification_audit_expired_by_buyer:{icon:"bell"},workforce_classification_audit_expired_by_buyer_credit:{icon:"bell"},workforce_classification_audit_canceled_by_buyer:{icon:"bell"},workforce_classification_audit_canceled_by_buyer_credit:{icon:"bell"},background_check_requested_by_seller:{icon:"bell"},background_check_requested_by_buyer:{icon:"bell"},background_check_completed_by_seller:{icon:"bell"},background_check_completed_by_buyer:{icon:"bell"},background_check_refund_by_buyer:{icon:"bell"},background_check_refund_by_buyer_credit:{icon:"bell"},tier_subscription_subscribed_to_advanced:{icon:"bell"},tier_subscription_subscribed_to_essential:{icon:"bell"},member_requests_from_admin_to_upload_legal_templates:{icon:"bell"},member_is_notified_that_admin_uploaded_legal_templates:{icon:"bell"},tier_subscription_member_gets_update_on_request:{icon:"bell"},freelance_talent_recommendation_list_is_ready:{icon:"bell"},freelance_talent_recommendation_list_was_updated:{icon:"bell"},go_order_created_to_buyer:{icon:"bell"},go_order_delivered_seller:{icon:"bell"},go_order_completed_seller:{icon:"bell"},go_order_revision_requested_seller:{icon:"bell"},personal_assistant_conversation_invitation:{icon:"bell"},buyer_hourly_intent:{icon:"bell"},fiverr_ads_blocked_due_to_debt:{icon:"bell"},fiverr_ads_debt_warning:{icon:"bell"},fiverr_ads_resumed_after_debt_settle:{icon:"bell"},fiverr_ads_tax_start_date_notification:{icon:"bell"},seller_referral_opportunity:{icon:"bell"},seller_referral_dashboard_activity:{icon:"bell"},legal_document_expired:{icon:"bell"},promoted_ads_seller_becomes_ineligible:{icon:"bell"},promoted_ads_seller_becomes_eligible_first_time:{icon:"bell"},promoted_ads_seller_becomes_eligible_again:{icon:"bell"},promoted_ads_gig_becomes_eligible_first_time:{icon:"bell"},promoted_ads_profession_becomes_eligible_first_time:{icon:"bell"},loyalty_tier_at_risk:{icon:"bell"},loyalty_credits_about_to_expire:{icon:"bell"},loyalty_credits_already_expired:{icon:"bell"},loyalty_gift_cards_about_to_expire:{icon:"bell"},loyalty_gift_cards_already_expired:{icon:"bell"},loyalty_donations_about_to_expire:{icon:"bell"},loyalty_donations_already_expired:{icon:"bell"},loyalty_redeem_credits:{icon:"bell"},loyalty_redeem_gift_cards:{icon:"bell"},loyalty_donate_or_redeem:{icon:"bell"},loyalty_points_added:{icon:"bell"},loyalty_welcome_to_gold_tier:{icon:"bell"},loyalty_welcome_to_platinum_tier:{icon:"bell"},loyalty_welcome_to_diamond_tier:{icon:"bell"},loyalty_tier_downgrade:{icon:"bell"},fiverr_ads_seller_becomes_chargeable:{icon:"bell"},loyalty_points_expire_in_90_days:{icon:"bell"},domain_expert_sourcing_referred_buyer_messaged_you:{icon:"bell"},new_lovable_message:{icon:"bell"}},t={fullGig:{gigImage:!0,userImage:!0,subCat:!0},studioOrder:{gigImage:!0,studioImage:!0}},i=function(i){if(!e[i])return null;var n=_.extend({},e[i]);if(n.hasOwnProperty("group")){var r=n.group;_.extend(n,t[r]),delete n.group}return n};window.notificationConfiguration=i}(),this.Fiverr=this.Fiverr||{},this.Fiverr.Templates=this.Fiverr.Templates||{},Handlebars.registerPartial("notification-aside-basic",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return"<aside>\n"+(null!=(r=this.invokePartial(i["notification-toggle-read"],e,{name:"notification-toggle-read",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+"</aside>\n"},usePartial:!0,useData:!0})),Handlebars.registerPartial("notification-aside-with-close",Handlebars.template({1:function(e,t,i,n){var r;return'        <div class="preview-image" style="background-image:url('+this.escapeExpression(this.lambda(null!=(r=null!=e?e.images:e)?r.gig:r,e))+')"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return'<aside>\n    <nav>\n        <a href="#!" class="btn-close js-btn-close">&times;</a>\n    </nav>\n'+(null!=(r=t["if"].call(e,null!=(r=null!=e?e.images:e)?r.gig:r,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+"</aside>\n"},useData:!0})),Handlebars.registerPartial("notification-aside-with-image",Handlebars.template({1:function(e,t,i,n){var r;return'        <div class="preview-image" style="background-image:url('+this.escapeExpression(this.lambda(null!=(r=null!=e?e.images:e)?r.gig:r,e))+')"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return"<aside>\n"+(null!=(r=this.invokePartial(i["notification-toggle-read"],e,{name:"notification-toggle-read",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+(null!=(r=t["if"].call(e,null!=(r=null!=e?e.images:e)?r.gig:r,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+"</aside>\n"},usePartial:!0,useData:!0})),Handlebars.registerPartial("notification-date",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,a,o=t.helperMissing;return'<time datetime="'+this.escapeExpression((a=null!=(a=t.updatedAt||(null!=e?e.updatedAt:e))?a:o,"function"==typeof a?a.call(e,{name:"updatedAt",hash:{},data:n}):a))+'">'+(null!=(r=(t.howLongAgo||e&&e.howLongAgo||o).call(e,null!=e?e.updatedAt:e,!0,{name:"howLongAgo",hash:{},data:n}))?r:"")+"</time>\n"},useData:!0})),Handlebars.registerPartial("notification-footer-basic",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return"<footer>\n"+(null!=(r=this.invokePartial(i["notification-date"],e,{name:"notification-date",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+"</footer>\n"},usePartial:!0,useData:!0})),Handlebars.registerPartial("notification-footer-with-subcat",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,a=this.lambda,o=this.escapeExpression;return"<footer>\n    "+(null!=(r=this.invokePartial(i["notification-date"],e,{name:"notification-date",data:n,helpers:t,partials:i}))?r:"")+'<span class="sub-category">'+o(a(null!=(r=null!=e?e.params:e)?r.sub_category:r,e))+'</span><span class="status hint--left" data-hint="'+(null!=(r=(t.deHyphenate||e&&e.deHyphenate||t.helperMissing).call(e,null!=(r=null!=e?e.params:e)?r.order_status:r,"-"," ",{name:"deHyphenate",hash:{},data:n}))?r:"")+'"><span class="icn-status '+o(a(null!=(r=null!=e?e.params:e)?r.order_status:r,e))+'"></span></span>\n</footer>\n'},usePartial:!0,useData:!0})),Handlebars.registerPartial("notification-icon",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return'<figure>\n    <div class="notification-icon '+this.escapeExpression((r=null!=(r=t.iconName||(null!=e?e.iconName:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"iconName",hash:{},data:n}):r))+'"></div>\n</figure>\n'},useData:!0})),Handlebars.registerPartial("notification-toggle-read",Handlebars.template({1:function(e,t,i,n){return'        <a href="#!" class="mark-unread hint--bottom" data-hint="'+this.escapeExpression((t.getI18nText||e&&e.getI18nText||t.helperMissing).call(e,"notifications.mark_as_unread",{name:"getI18nText",hash:{},data:n}))+'"></a>\n'},3:function(e,t,i,n){var r,a=t.helperMissing;return'        <a href="#!" class="mark-read hint--bottom" data-hint="'+this.escapeExpression((t.getI18nText||e&&e.getI18nText||a).call(e,"notifications.mark_as_read",{name:"getI18nText",hash:{},data:n}))+'"></a>\n'+(null!=(r=(t.ifAboveGoal||e&&e.ifAboveGoal||a).call(e,null!=e?e.unreadCount:e,1,{name:"ifAboveGoal",hash:{},fn:this.program(4,n,0),inverse:this.noop,data:n}))?r:"")},4:function(e,t,i,n){var r;return'            <span class="unread-count">'+this.escapeExpression((r=null!=(r=t.unreadCount||(null!=e?e.unreadCount:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"unreadCount",hash:{},data:n}):r))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return"<nav>\n"+(null!=(r=t["if"].call(e,null!=e?e.isRead:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.program(3,n,0),data:n}))?r:"")+"</nav>\n"},useData:!0})),Handlebars.registerPartial("notification-user-image",Handlebars.template({1:function(e,t,i,n){return' class="online"'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return"<figure"+(null!=(r=t["if"].call(e,null!=e?e.isOnline:e,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+'>\n    <span class="user-pict-55">'+(null!=(r=this.lambda(null!=(r=null!=e?e.images:e)?r.user:r,e))?r:"")+"</span>\n</figure>\n"},useData:!0})),this.Fiverr.Templates["notifications/inbox-drawer-item"]=Handlebars.template({1:function(e,t,i,n){return" unread"},3:function(e,t,i,n){var r;return'<a href="'+this.escapeExpression((r=null!=(r=t.url||(null!=e?e.url:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"url",hash:{},data:n}):r))+'" class="js-main-action"></a>'},5:function(e,t,i,n){return this.escapeExpression((t.getI18nText||e&&e.getI18nText||t.helperMissing).call(e,"notifications.me",{name:"getI18nText",hash:{},data:n}))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,a,o=t.helperMissing,l="function",s=this.escapeExpression;return'<li class="inbox-message drawer-item'+(null!=(r=t.unless.call(e,null!=e?e.isRead:e,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+'" data-id="'+s((a=null!=(a=t.id||(null!=e?e.id:e))?a:o,typeof a===l?a.call(e,{name:"id",hash:{},data:n}):a))+'">\n    '+(null!=(r=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?r:"")+"\n"+(null!=(r=this.invokePartial(i["notification-aside-basic"],e,{name:"notification-aside-basic",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+(null!=(r=this.invokePartial(i["notification-user-image"],e,{name:"notification-user-image",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+'    <div class="content">\n        <header>\n            <strong>'+s((a=null!=(a=t.username||(null!=e?e.username:e))?a:o,typeof a===l?a.call(e,{name:"username",hash:{},data:n}):a))+"</strong>\n        </header>\n        <p>"+(null!=(r=t["if"].call(e,null!=e?e.isSender:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?r:"")+s((a=null!=(a=t.snippet||(null!=e?e.snippet:e))?a:o,typeof a===l?a.call(e,{name:"snippet",hash:{},data:n}):a))+"</p>\n"+(null!=(r=this.invokePartial(i["notification-footer-basic"],e,{name:"notification-footer-basic",data:n,indent:"        ",helpers:t,partials:i}))?r:"")+"    </div>\n</li>\n"},usePartial:!0,useData:!0}),this.Fiverr.Templates["notifications/live-tray-inbox-item"]=Handlebars.template({1:function(e,t,i,n){return" gig-image"},3:function(e,t,i,n){var r;return'<a href="'+this.escapeExpression((r=null!=(r=t.url||(null!=e?e.url:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"url",hash:{},data:n}):r))+'" class="js-main-action"></a>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,a,o=t.helperMissing,l="function",s=this.escapeExpression;return'<li class="inbox-message drawer-item unread'+(null!=(r=t["if"].call(e,null!=(r=null!=e?e.images:e)?r.gig:r,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+'" data-id="'+s((a=null!=(a=t.id||(null!=e?e.id:e))?a:o,typeof a===l?a.call(e,{name:"id",hash:{},data:n}):a))+'">\n    '+(null!=(r=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?r:"")+"\n"+(null!=(r=this.invokePartial(i["notification-aside-with-close"],e,{name:"notification-aside-with-close",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+(null!=(r=this.invokePartial(i["notification-user-image"],e,{name:"notification-user-image",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+'    <div class="content">\n        <header>\n            <strong>'+s((a=null!=(a=t.username||(null!=e?e.username:e))?a:o,typeof a===l?a.call(e,{name:"username",hash:{},data:n}):a))+"</strong>\n        </header>\n        <p>"+s((a=null!=(a=t.snippet||(null!=e?e.snippet:e))?a:o,typeof a===l?a.call(e,{name:"snippet",hash:{},data:n}):a))+"</p>\n    </div>\n</li>\n"},usePartial:!0,useData:!0}),this.Fiverr.Templates["notifications/live-tray-notifications-item"]=Handlebars.template({1:function(e,t,i,n){return" gig-image"},3:function(e,t,i,n){var r;return'<a href="'+this.escapeExpression((r=null!=(r=t.url||(null!=e?e.url:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"url",hash:{},data:n}):r))+'" class="js-main-action"></a>'},5:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-user-image"],e,{name:"notification-user-image",data:n,indent:"        ",helpers:t,partials:i}))?r:""},7:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-icon"],e,{name:"notification-icon",data:n,indent:"        ",helpers:t,partials:i}))?r:""},9:function(e,t,i,n){var r,a=this.lambda;return'            <p class="text-long"><strong>'+(null!=(r=a(null!=(r=null!=e?e.params:e)?r.user:r,e))?r:"")+'</strong>: "'+this.escapeExpression(a(null!=(r=null!=e?e.params:e)?r.message_content:r,e))+'"</p>\n'},11:function(e,t,i,n){var r;return'            <p class="'+(null!=(r=this.lambda(null!=(r=null!=e?e.params:e)?r["class"]:r,e))?r:"")+'">'+(null!=(r=(t.hasPartial||e&&e.hasPartial||t.helperMissing).call(e,"customContent",{name:"hasPartial",hash:{},fn:this.program(12,n,0),inverse:this.program(14,n,0),data:n}))?r:"")+"</p>\n"},12:function(e,t,i,n){var r;return null!=(r=this.lambda(null!=(r=null!=e?e.params:e)?r.content:r,e))?r:""},14:function(e,t,i,n){var r,a;return null!=(a=null!=(a=t.notificationContent||(null!=e?e.notificationContent:e))?a:t.helperMissing,r="function"==typeof a?a.call(e,{name:"notificationContent",hash:{},data:n}):a)?r:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,a,o=t.helperMissing;return'<li class="notifications-message drawer-item unread'+(null!=(r=t["if"].call(e,null!=(r=null!=e?e.images:e)?r.gig:r,{name:"if",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+'" data-id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:o,"function"==typeof a?a.call(e,{name:"id",hash:{},data:n}):a))+'">\n    '+(null!=(r=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?r:"")+"\n"+(null!=(r=this.invokePartial(i["notification-aside-with-close"],e,{name:"notification-aside-with-close",data:n,indent:"    ",helpers:t,partials:i}))?r:"")+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"userImage",{name:"hasPartial",hash:{},fn:this.program(5,n,0),inverse:this.program(7,n,0),data:n}))?r:"")+'    <div class="content">\n'+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"textLong",{name:"hasPartial",hash:{},fn:this.program(9,n,0),inverse:this.program(11,n,0),data:n}))?r:"")+"    </div>\n</li>\n"},usePartial:!0,useData:!0}),this.Fiverr.Templates["notifications/notification-phone-verify"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return'<div class="phone-verify-notify js-phone-verify-notify gig-image">\n    <figure>\n        <div class="notification-icon phone"></div>\n    </figure>\n    <div class="content">\n        <label>\n            '+(null!=(r=(t.getI18nText||e&&e.getI18nText||t.helperMissing).call(e,"application.titles.phone_verification.notification.title",{name:"getI18nText",hash:{},data:n}))?r:"")+"\n        </label>\n    </div>\n</div>"},useData:!0}),this.Fiverr.Templates["notifications/notifications-drawer-item"]=Handlebars.template({1:function(e,t,i,n){return" unread"},3:function(e,t,i,n){return" gig-image"},5:function(e,t,i,n){var r;return'<a href="'+this.escapeExpression((r=null!=(r=t.url||(null!=e?e.url:e))?r:t.helperMissing,
"function"==typeof r?r.call(e,{name:"url",hash:{},data:n}):r))+'" class="js-main-action"></a>'},7:function(e,t,i,n){return'<a href="#!" class="js-custom-action"></a>'},9:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-aside-with-image"],e,{name:"notification-aside-with-image",data:n,indent:"        ",helpers:t,partials:i}))?r:""},11:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-aside-basic"],e,{name:"notification-aside-basic",data:n,indent:"        ",helpers:t,partials:i}))?r:""},13:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-user-image"],e,{name:"notification-user-image",data:n,indent:"        ",helpers:t,partials:i}))?r:""},15:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-icon"],e,{name:"notification-icon",data:n,indent:"        ",helpers:t,partials:i}))?r:""},17:function(e,t,i,n){var r,a=this.lambda;return'            <p class="text-long"><strong>'+(null!=(r=a(null!=(r=null!=e?e.params:e)?r.user:r,e))?r:"")+'</strong>: "'+this.escapeExpression(a(null!=(r=null!=e?e.params:e)?r.message_content:r,e))+'"</p>\n'},19:function(e,t,i,n){var r;return"            <p>"+(null!=(r=(t.hasPartial||e&&e.hasPartial||t.helperMissing).call(e,"customContent",{name:"hasPartial",hash:{},fn:this.program(20,n,0),inverse:this.program(22,n,0),data:n}))?r:"")+"</p>\n"},20:function(e,t,i,n){var r;return null!=(r=this.lambda(null!=(r=null!=e?e.params:e)?r.content:r,e))?r:""},22:function(e,t,i,n){var r,a;return null!=(a=null!=(a=t.notificationContent||(null!=e?e.notificationContent:e))?a:t.helperMissing,r="function"==typeof a?a.call(e,{name:"notificationContent",hash:{},data:n}):a)?r:""},24:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-footer-with-subcat"],e,{name:"notification-footer-with-subcat",data:n,indent:"            ",helpers:t,partials:i}))?r:""},26:function(e,t,i,n){var r;return null!=(r=this.invokePartial(i["notification-footer-basic"],e,{name:"notification-footer-basic",data:n,indent:"            ",helpers:t,partials:i}))?r:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,a,o=t.helperMissing;return'<li class="notifications-message drawer-item'+(null!=(r=t.unless.call(e,null!=e?e.isRead:e,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+(null!=(r=t["if"].call(e,null!=(r=null!=e?e.images:e)?r.gig:r,{name:"if",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?r:"")+'" data-id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:o,"function"==typeof a?a.call(e,{name:"id",hash:{},data:n}):a))+'">\n    '+(null!=(r=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(5,n,0),inverse:this.noop,data:n}))?r:"")+"\n    "+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"customAction",{name:"hasPartial",hash:{},fn:this.program(7,n,0),inverse:this.noop,data:n}))?r:"")+"\n"+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"gigImage",{name:"hasPartial",hash:{},fn:this.program(9,n,0),inverse:this.program(11,n,0),data:n}))?r:"")+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"userImage",{name:"hasPartial",hash:{},fn:this.program(13,n,0),inverse:this.program(15,n,0),data:n}))?r:"")+'    <div class="content">\n'+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"textLong",{name:"hasPartial",hash:{},fn:this.program(17,n,0),inverse:this.program(19,n,0),data:n}))?r:"")+(null!=(r=(t.hasPartial||e&&e.hasPartial||o).call(e,"subCat",{name:"hasPartial",hash:{},fn:this.program(24,n,0),inverse:this.program(26,n,0),data:n}))?r:"")+"    </div>\n</li>\n"},usePartial:!0,useData:!0}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["notification-drawer"]=t():e["notification-drawer"]=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=103)}({103:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(9),a=n(r),o=i(53),l=n(o),s=i(50),d=n(s),c=i(79),u=n(c);t["default"]=function(){Handlebars.registerHelper("deHyphenate",a["default"]),Handlebars.registerHelper("iconName",l["default"]),Handlebars.registerHelper("hasPartial",d["default"]),Handlebars.registerHelper("notificationContent",u["default"])}(),e.exports=t["default"]},50:function(e,t,i){"use strict";e.exports=function(e,t){var i=t.data.root.subType,n=notificationConfiguration(i);return n.hasOwnProperty(e)?t.fn(this):t.inverse(this)}},53:function(e,t,i){"use strict";e.exports=function(e){var t=e.data.root.subType,i=notificationConfiguration(t);return i.hasOwnProperty("icon")?i.icon:i.hasOwnProperty("dynamicIcon")?e.data.root.params.icon:"docs"}},79:function(e,t,i){"use strict";e.exports=function(e){var t=e.data.root;return $.t("notifications.content."+t.subType,t.params||{})}},9:function(e,t,i){"use strict";e.exports=function(e){return e.replace(/-/g," ")}}})}),function(e){MixpanelWrapper.bindLink('.js-show-tab[data-show-tab="inbox"]',MixpanelWrapper.Events.ConversationsEvents.OPENED_INBOX_PREVIEW);var t,i,n,r,a=0===e(".js-notification-drawer").length,o=0===e(".js-hover-drawer").length,l="inbox",s="notifications",d="recent",c="loadMore",u="initial",p="pull-up",f="pull-down",m="locked",g="loading-stripe",h="drawer-item",b="nochange",v="bounce",y="new",w="refresh",k="itemList",I="itemStore",x={delay:250},C={config:{ajaxCounter:0,pageSize:10,hoverDrawerHeight:532,requestInterval:5e3,timestampPlaceHolder:":timestamp:",routes:{inbox:{markAsRead:Fiverr.models.ps.markConversationAsReadUrl,markAsUnread:Fiverr.models.ps.markConversationAsUnreadUrl,preview:Fiverr.models.ps.previewConversationDefaultTimestampUrl},notifications:{markAsRead:Fiverr.models.ps.markNotificationAsReadUrl,markAsUnread:Fiverr.models.ps.markNotificationAsUnreadUrl,preview:Fiverr.models.ps.previewNotificationDefaultTimestampUrl}}},hasRecentRequestExpired:function(e){var i=t.recentRequest(e).get("time");return!i||i&&G.isBeforeNow(i+r.requestInterval)},recentRequest:function(e){return store.drawers.getIn(e,["recentRequest"])},getItems:function(e){t.isBeforeInitialRequest(e)?t.getInitial(e):t.getRecent(e)},getRecent:function(e){t.hasRecentRequestExpired(e)&&D.getRecent(e)},handleRealTimeItem:function(e){return D.handleRealTimeItem(e)},handleSingleItem:function(e){return D.handleSingleItem(e)},isBeforeInitialRequest:function(e){var i=t.recentRequest(e);return!i.get("time")},getInitial:function(e){t.hasRecentRequestExpired(e)&&(D.getInitial(e),T.drawer.showLoading(e))},loadMore:function(e,t){D.loadMore(e,t)},toggleRead:function(e,t){var i=D.getItemContainer(e),n=i.itemStore,r=n.get(t);r=r.toggleRead()},getSubType:function(e,t){var i=D.getItemContainer(e),n=i.itemStore,r=n.get(t);return r.subType},getNotificationCount:function(e){var t=D.getItemContainer(e),i=t.itemList;return i.length},renderBunch:function(e,t,i){var n=D.getItemContainer(e),a=n.itemList,o=n.itemStore,t=t||r.pageSize,i=i||0;a=a.skip(i),a=a.take(t),a.forEach(function(e){"dummy"!==e&&T.item.addToView(o.get(e))})},localRefresh:function(e,t){var i=!0,n=D.getItemContainer(e),r=n.itemStore;r.has(t)&&T.item.addToView(r.get(t),i)},disableLoadMore:function(e){T.drawer.toggleLoadMore(e,!1),T.hoverDrawer.should(T.hoverDrawer.disableLoadMore,[e])},initialListIsEmpty:function(e,i){var n=!0;t.disableLoadMore(e),T.drawer.toggleEmptyState(e,n,i),T.hoverDrawer.should(T.hoverDrawer.turnHoverToRedirect,[e])},itemsAddedToEmptyList:function(e){var t=!1;T.drawer.toggleEmptyState(e,t)},updateTotalUnreadCount:function(e,t){T.drawer.updateTotalUnreadCount(e,t),T.notificationMarkers.toggleMarker(e,!!t)}},D={models:{ps:Fiverr.models.ps,user:Fiverr.models.user,drawers:{},store:Immutable.Map.of("drawers",Immutable.Map())},init:function(){store.set("itemTypes",Immutable.List.of(s,l)),store.get("itemTypes").forEach(function(e){var t={itemStore:{},itemList:[],recentRequest:{time:0,requestedData:null},unreadCount:0};store.set(e,Immutable.fromJS(t))})},getCorrectDataName:function(e){return e===l?"conversations":s},getItemContainer:function(e){var t=store.get(e);return{itemList:t.get(k),itemStore:t.get(I)}},updateRecentRequest:function(e,t){var i=store.drawers.getIn(e,["recentRequest"]),n={recentRequest:{}};if(t!=c){var r=Date.now();n.recentRequest.time=r}else n.recentRequest.time=i.get("time");n.recentRequest.requestedData=t,store.drawers.merge(e,n)},postUpdateRead:function(i,n,a){var o=n?r.routes[i].markAsRead:r.routes[i].markAsUnread;e.ajax({type:"post",url:o,data:{id:a}}),t.localRefresh(i,a)},incrementTotalUnreadCount:function(e,t){var i=D.getTotalUnreadCount(e);i+=t,0>i&&(i=0),D.updateTotalUnreadCount(e,i)},updateTotalUnreadCount:function(e,n){var a=e+"UnreadUpdateDelay";n=n||0,clearTimeout(i[a]),i[a]=setTimeout(function(){store.drawers.updateIn(e,["unreadCount"],n),t.updateTotalUnreadCount(e,n),2===r.ajaxCounter&&(T.hoverDrawer.openInboxDrawer("inbox"),r.ajaxCounter=0)},50)},getTotalUnreadCount:function(e){return unreadCount=store.drawers.getIn(e,["unreadCount"])},getInitial:function(e){var i=!0,n=0,a=D.addTimestampToPreviewUrl(e,n),o=D.getCorrectDataName(e);D.updateRecentRequest(e,u),D.getItemsAjax(e,a,function(n){var a=n.service_unavailable||!1;return _.isEmpty(n[o])?t.initialListIsEmpty(e,a):(t.itemsAddedToEmptyList(e),_.size(n[o])<=r.pageSize&&t.disableLoadMore(e),n[o].forEach(function(t){D.newItem(e,t,i)}),void D.itemsReady(e))})},getRecent:function(e){D.updateRecentRequest(e,d);var i,n=D.getItemContainer(e),r=n.itemList,a=n.itemStore,o=0,l=D.getCorrectDataName(e),s=!r.isEmpty();if(s&&a.has(r.get(0))){var c=r.first();o=store.item.getById(e,c).updatedAt,o=G.msToSconds(o)}i=D.addTimestampToPreviewUrl(e,o),D.getItemsAjax(e,i,function(i){_.isEmpty(i[l])||(s&&t.itemsAddedToEmptyList(e),i[l].forEach(D.handleSingleItem))})},handleRealTimeItem:function(e){var t=e.type||e.msg_type||s;return D.newItem(t,e,!1)},handleSingleItem:function(e){var i=e.type||e.msg_type||s,n=t.isBeforeInitialRequest(i);if(n){var e=D.newItem(i,e,n);return t.getItems(i),D.itemsReady(i,1),e}D.updateRecentRequest(i,d);var r=store.item.getById(i,e.id),a=D.getItemContainer(i),o=a.itemList;if(!r)return e=D.newItem(i,e,n),D.itemsReady(i,1),e;if(r.fastForward(e),r.state===v){var l=o.findIndex(function(e){return e===r.id});o=o.splice(l,1),o=o.unshift(r.id),store.drawers.updateIn(i,[k],o)}return e=store.item.getById(i,e.id),D.itemsReady(i,1),e},getItemsAjax:function(t,i,n){e.ajax({dataType:"json",type:"get",url:i,success:function(e){var i=e.unread_conversations_count||e.unread_notifications_count;r.ajaxCounter++,Fiverr._nullOrUndefined(i)&&(i=0),D.updateTotalUnreadCount(t,i),n(e)}})},addTimestampToPreviewUrl:function(e,t){return r.routes[e].preview.replace(r.timestampPlaceHolder,t)},loadMore:function(e,i){var n=D.getItemContainer(e),a=n.itemList;D.updateRecentRequest(e,c),a.has(i)?(t.renderBunch(e,r.pageSize,i),D.canLoadMore(e,i)||t.disableLoadMore(e)):t.disableLoadMore(e)},canLoadMore:function(e,t){var i=D.getItemContainer(e),n=i.itemList,a=t+r.pageSize;return n.has(a)},itemsReady:function(e,i){t.renderBunch(e,i||0)},newItem:function(e,i,n){var r=new D.item(i);if(t.isBeforeInitialRequest(r.type))return r;var a=D.getItemContainer(r.type);a.itemList,a.itemStore,r.id;return store.item.add(e,r,n),r},item:function(e){this.fastForward(e)}},T={selectors:{$body:Fiverr.selectors.$body||e("body"),$headerWrapper:Fiverr.selectors.$mainHeader||e("#main-wrapper-header")},init:function(){n.$mainHeader=Fiverr.selectors.$jsHeader,T.drawer.init(),T.hoverDrawer.init(),T.notificationMarkers.init()},drawer:{init:function(){n.$allNotificationDrawers=e(".js-notification-drawer"),n.notificationDrawers={},n.$allNotificationDrawers.each(function(t,i){var n=e(i),r=n.data("type"),a=T.drawer.get(r);a?(a.off(),T.drawer.set(r,a.add(n)),T.drawer.bindActions(r)):(T.drawer.set(r,n),T.drawer.bindActions(r))})},get:function(e){return n.notificationDrawers[e]},set:function(e,t){n.notificationDrawers[e]=t},bindActions:function(i){var n=T.drawer.get(i);n.on("click","nav a",function(n){n.preventDefault();var r=e(n.target).closest("."+h),a=r.data("id"),o="unread",l="item_mark_",s=r.hasClass(o);t.toggleRead(i,a),l+=s?"read":o,G.track(i,l)}),n.on("click","a.js-main-action",function(){G.track(i,"item_click")}),n.on("click","a.js-custom-action",function(n){n.preventDefault();var r=e(n.target).closest("."+h),a=r.data("id"),o=r.hasClass("unread"),l=t.getSubType(i,a);switch(o&&t.toggleRead(i,a),l){case"optional_phone_verification":fLoader({load:["//assetsv2.fiverrcdn.com/assets/phone-verification-notification.js-d5aa4d206fc2663951afd3a2c6fa74cf.erb"],complete:function(){fPhoneVerificationNotification.optional(n)}})}}),n.next(".js-load-more").on("click",function(e){e.preventDefault(),T.drawer.loadMore(i)}),n.on("attach",_.debounce(function(){T.drawer.toggleLoadMore(i,!0)},50))},updateTotalUnreadCount:function(e,t){var i=T.drawer.get(e);!a&&i&&i.length&&(i.data("totalUnreadCount",t),T.hoverDrawer.should(T.hoverDrawer.updateTotalUnreadCount,[e,t]),i.trigger("unreadCountUpdated",{type:e,count:t}))},showLoading:function(e){var t=T.drawer.get(e),i=g;!a&&t&&t.length&&(t.addClass(i),setTimeout(function(){t.removeClass(i)},1e3))},toggleLoadMore:function(e,t){if(!a){var i=T.drawer.get(e);if(i&&i.length){var n="js-load-more",r=i.next("."+n),o="removed";t?r.removeClass(o):r.hasClass(o)?r.remove():(r.removeClass(n).addClass(o),r.on("transitionend",function(){r.remove()}))}}},toggleEmptyState:function(e,t,i){var n=T.drawer.get(e);if(!a&&n&&n.length){var r=n.parent();r.toggleClass("drawer-empty",t),i&&t&&r.addClass("unavailable")}},getItems:function(e,i){t.getItems(e),T.drawer.updateAllTimestamps(e),"function"==typeof i&&i()},loadMore:function(i){var n={},r=T.drawer.get(i).find("."+h).filter(function(){var t=e(this),i=t.data("id");return n[i]?!1:(n[i]=!0,!0)}),a=r.length;t.loadMore(i,a),G.track(i,"load-more")},updateAllTimestamps:function(e){var t=T.drawer.get(e),i=t.data("recentTimeTagUpdate"),n=Date.now();(!i||G.isBeforeNow(i+6e4))&&(T.drawer.iterateItemsAndCallback(e,T.item.refreshTimeTag),t.data("recentTimeTagUpdate",n))},iterateItemsAndCallback:function(t,i){var n=T.drawer.get(t),r=n.find("."+h);r.each(function(n,r){i(t,e(r))})}},item:{find:function(e,t){var i,n=T.drawer.get(e);if(n&&n.length)return i=n.find('.drawer-item[data-id="'+t+'"]')},renderTemplate:function(t){var i=l;notificationConfiguration(t.subType)&&(i=s);var n=Fiverr._getHbTemplate({tplType:s,tplName:i+"-"+h,tplData:t});return e(n)},addToView:function(e,t){var i,n=e.type,r=e.id,a=T.drawer.get(n);(t||T.item.shouldRender(e))&&(i=T.item.renderTemplate(e),e.state===v?T.item.bounce(n,r,i):t||e.state===w?T.item.refresh(n,r,i):T.item.attach(e,i),G.view.trimLongText(a,i),a.removeClass(g).trigger("addToView"))},shouldRender:function(e){var t=e.type,i=e.id,n=e.state!==b,r=T.item.find(t,i);return n?!0:!r.length},removeDuplicates:function(e,t){var i=T.item.find(e,t);i.remove()},attach:function(e,i){var n=e.type,r=e.id,a=T.drawer.get(n),o=t.recentRequest(n).get("requestedData"),l=o&&o!==d,s=o&&o===c;if(e.state===v)T.item.removeDuplicates(n,r),a.prepend(i);else if(e.state===y)T.item.removeDuplicates(n,r),l?a.append(i):a.prepend(i);else{if(e.state!==b||!s)return;T.item.removeDuplicates(n,r),a.append(i)}a.trigger("attach")},refresh:function(e,t,i){var n=T.item.find(e,t);n.replaceWith(i)},bounce:function(e,t,i){var n;$drawer=T.drawer.get(e),n=T.item.find(e,t),n.remove(),i.css("visibility","hidden"),i.css("visibility",""),$drawer.prepend(i)},refreshTimeTag:function(e,t){var i=t.find("time"),n=parseInt(i.attr("datetime"),10),r=Fiverr.howLongAgo(n);i.text(r)}},hoverDrawer:{init:function(){var t=function(t,i,r){var a=e(i),o=r?"."+r+" ":"",l=a.find("> header"),s=l.find(o+".js-view-link"),d=l.find(o+".js-total-unread-count"),c=a.find(o+".js-notification-drawer"),u=c.closest("li"),_=u.find(".js-hover-drawer-trigger"),p=a.find(o+".antiscroll-wrap"),f=a.find(o+".antiscroll-inner"),m=r||u.data("mark");n.hoverDrawer[m]={$trigger:_,$hoverDrawer:a,$header:l,$viewLink:s,$unreadCount:d,$drawer:c,$parent:u,$scroll:p,$scrollInn:f,state:0},T.hoverDrawer.bindEvents(m),T.selectors.hoverDrawer[m].$trigger.removeAttr("disabled")};Fiverr.models.browser.isMobileResponsive||(n.hoverDrawer={},n.$mainHeader.find(".js-hover-drawer [data-tab]").each(function(i,n){var r=e(n);t(i,r.closest(".js-hover-drawer"),r.data("tab"))}))},should:function(e,t){var i=!Fiverr.models.browser.isMobileResponsive;i&&e.apply(this,t)},updateTotalUnreadCount:function(e,t){var i=n.hoverDrawer[e];if(!o&&i&&i.length){var r=i.$unreadCount,a="";t&&(a="("+t+")"),r.text(a)}},closeDrawer:function(e){var t=n.hoverDrawer[e],i=t.$hoverDrawer;i.addClass("hidden"),t.state=0,T.hoverDrawer.offEventsOnClose(e)},openDrawer:function(e){var t=n.hoverDrawer[e],i=t.$hoverDrawer;i.removeClass("hidden"),t.state=1,T.drawer.getItems(e),T.hoverDrawer.onHoverDrawerOpen(e),setTimeout(function(){T.hoverDrawer.bindFakeModal(e)},0)},openInboxDrawer:function(e){var t=store.drawers.getIn("inbox",["unreadCount"]),i=store.drawers.getIn("notifications",["unreadCount"]);0===i&&t>0&&T.hoverDrawer.showInboxDrawer()},showInboxDrawer:function(){var t=e('[data-event-type="notifications"]'),i=e('[data-event-type="inbox"]'),n=e('[data-tab="notifications"]'),r=e('[data-tab="inbox"]');t.removeClass("selected"),i.addClass("selected"),n.addClass("hidden"),r.removeClass("hidden")},toggleHideDrawer:function(e){var t=n.hoverDrawer[e];1===t.state?T.hoverDrawer.closeDrawer(e):T.hoverDrawer.openDrawer(e),t.$parent.toggleClass("open",!!t.state)},redirectToViewPage:function(e){var t=n.hoverDrawer[e],i=t.$viewLink.prop("href");i&&(window.location=i)},bindFakeModal:function(t){n.$body.on("click.fakeModal",function(i){var n=e(i.target),r=!(n.closest(".js-hover-drawer").length+n.closest("."+h).length);r&&T.hoverDrawer.closeDrawer(t)}),n.$body.on("keyup.fakeModal",function(e){27===e.keyCode&&T.hoverDrawer.closeDrawer(t)})},offEventsOnClose:function(e){n.hoverDrawer[e];n.$body.off("click.fakeModal"),n.$body.off("keyup.fakeModal"),T.hoverDrawer.destoryScrollBar(e)},bindEvents:function(t){var i=n.hoverDrawer[t],r=i.$hoverDrawer,a=i.$drawer,o=i.$scrollInn;i.$trigger.on("click",function(e){e.preventDefault(),T.hoverDrawer.toggleHideDrawer(t)}),i.$trigger.on("mouseenter",function(e){T.drawer.getItems(l),T.drawer.getItems(s)}),i.$hoverDrawer.find(".js-show-tab").on("click",function(t){t.preventDefault();var i=e(this);e(".js-show-tab").removeClass("selected"),i.addClass("selected"),e(".js-notifications-wrapper").addClass("hidden"),e(".js-notifications-wrapper."+i.data("show-tab")).removeClass("hidden"),e(".js-see-all").addClass("hidden"),e(".js-see-all."+i.data("show-tab")).removeClass("hidden")}),a.on("attach",_.debounce(function(){T.hoverDrawer.attachScrollBar(t)},500)),i.$scrollInn.on("hitBottom",_.throttle(function(){r.hasClass(p)||(r.addClass(p).data(m,!0),setTimeout(function(){T.drawer.loadMore(t)},500),T.hoverDrawer.relaseAndUnlockDrawer(t))},1e3)),i.$scrollInn.on("hitTop",_.throttle(function(){r.hasClass(f)||r.data(m)||(r.addClass(f).data(m,!0),T.drawer.showLoading(t),T.drawer.getItems(t),T.hoverDrawer.relaseAndUnlockDrawer(t))},250)),r.on("click",".js-track",function(i){var n,r=e(this);r.hasClass("btn-see-all")?n="see_all":r.hasClass("js-view-link")?n="view_"+t:r.hasClass("account-settings")&&(n="notification_settings"),G.track(t,n)}),Fiverr.stopMouseWheel(o)},onHoverDrawerOpen:function(e){var t=T.drawer.get(e);T.drawer.updateAllTimestamps(e),G.view.trimLongText(t),T.hoverDrawer.attachScrollBar(e),G.track(e,"open")},relaseAndUnlockDrawer:function(e){var t=n.hoverDrawer[e],i=t.$hoverDrawer;setTimeout(function(){i.removeClass(p+" "+f),setTimeout(function(){i.data(m,!1)},1e3)},1e3)},destoryScrollBar:function(e){var t=n.hoverDrawer[e],i=t.$scroll;i.data("initialized",null),i.data("antiscroll")&&i.data("antiscroll").destroy()},attachScrollBar:function(e){var t=n.hoverDrawer[e],i=t.$drawer,a=i.outerHeight(),o=t.$scroll,l=o.data("initialized");!l&&a>r.hoverDrawerHeight&&(o.antiscroll(),o.data("initialized",!0))},turnHoverToRedirect:function(e){if(e===l){var t=n.hoverDrawer[e];if(t){var i=t.$hoverDrawer;t.length&&(t.state?T.hoverDrawer.redirectToViewPage(e):i.data("redirect",!0))}}},disableLoadMore:function(e){var i=n.hoverDrawer[e];if(i&&i.length){t.getNotificationCount(e);i.$scrollInn.off("hitBottom")}}},notificationMarkers:{init:function(){Fiverr.models.browser.isMobileResponsive||(n.notificationMarkers={},n.notificationMarkers.$all=n.$mainHeader.find(".js-mark"),n.notificationMarkers.$all.each(function(t,i){var r=e(i),a=r.data("mark");a&&(n.notificationMarkers[a]=r)}),n.notificationMarkers[s]=n.notificationMarkers[l])},toggleMarker:function(e,t){if(!Fiverr.models.browser.isMobileResponsive&&!o){var i=n.notificationMarkers[e],r=i.hasClass("marked")!==t;r&&(i.toggleClass("marked",t),e===s&&t&&(e=l),T.notificationMarkers.toggleLs(e,t))}},toggleLs:function(e,t){var i="header_data_markers",n=ft.utl.getLS(i);n&&(n.markedStatuses[e]=t,ft.utl.setLS(i,n))}}},G={secondsToMs:function(e){return 1e3*e},msToSconds:function(e){return parseInt(e/1e3,10)},isBeforeNow:function(e){var t=Date.now();return t>e},track:function(e,t){if(e&&t){var i={};i[e+"_menu"]=t,Fiverr._reportAuxData(i),Fiverr.pushGoogleUniversalTag("drawers",e,t)}},view:{trimLongText:function(t,i){var n,r="p.text-long:not(.truncated)";n=i&&i.length?t.find('[data-id="'+i.data("id")+'"] p.text-long'):t.find(r),n.each(function(){var t=e(this);t.dotdotdot({wrap:"letter",watch:!1,height:45,ellipsis:'..."',callback:function(e){e?(t.removeClass("text-long"),t.addClass("truncated")):t.parents(".js-hover-drawer").length||t.removeClass("text-long")}})})}}};D.item.prototype={fastForward:function(e){if(e.id){var t=e.updatedAt||G.secondsToMs(e.updated_at),i=e.type===l||e.msg_type===l,n=this.id;if(i)var r=G.secondsToMs(e.recipient_updated_at),a=(e.isOnline||e.is_online,this.isOnline!==e.isOnline);if(n)if(this.updatedAt===t){if(!a)return void(this.state=b);this.state=w}else this.state=v;else this.state=y;i?(this.isSender=t>r,this.recipientUpdatedAt=r,this.snippet=e.preview_text||"",this.username=e.username||null,this.isOnline=e.is_online||!1,this.type=l,this.subType=l):(this.params=e.msg_params,this.type=this.type||e.type||e.msg_type||s,this.subType=e.subType||e.sub_type),this.id=e.id,this.images=e.images||{},this.updatedAt=t||null,this.unreadCount=e.unreadCount||e.unread_count||0,this.isRead=e.isRead||e.is_read,Fiverr._nullOrUndefined(this.isRead)&&(this.isRead=!this.unreadCount),e.url&&(this.url=e.url),n&&store.item.update(this.type,this),onNewItemActions(this)}},toggleRead:function(){var e,t=Date.now();if(!(this.toggleWait&&t<this.toggleWait))return this.toggleWait=t+150,this.isRead?(this.isRead=!1,e=1):(this.isRead=!0,e=-1),this.unreadCount=0,D.postUpdateRead(this.type,this.isRead,this.id),D.incrementTotalUnreadCount(this.type,e),store.item.update(this.type,this),this}},C.store={get:function(e){return i.store.get(e)},set:function(e,t){i.store=i.store.set(e,t)},update:function(e,t){i.store=i.store.update(e,function(){return t})},drawers:{getIn:function(e,t){return store.get(e).getIn(t)},updateIn:function(e,t,i){var n=store.get(e).updateIn(t,function(){return i});store.update(e,n)},merge:function(e,t){var i=store.get(e);i=i.mergeDeep(t),store.update(e,i)}},item:{add:function(e,t,i){var n=store.get(e),r=n.get(I),a=n.get(k),o=t.id;r=r.set(o,t),a=i?a.push(o):a.unshift(o),store.drawers.updateIn(e,[I],r),store.drawers.updateIn(e,[k],a)},getById:function(e,t){var i=store.drawers.getIn(e,[I]);return i.get(t)},update:function(e,t){store.drawers.updateIn(e,[I,t.id],t)}}},onNewItemActions=function(e){var t,i;if(x.data?i=x.data:(x.data=Fiverr.getUserLS("recentInteractions")||[],i=x.data),e.username?t=e.username:e.params&&(t=e.params.seller||e.params.user||e.params.buyer),t){if(i.length){var n=i.indexOf(t);n>-1&&i.splice(n,1)}i.unshift(t),i.length>250&&(i.length=250),clearTimeout(x.timeOut),x.timeOut=setTimeout(function(){Fiverr.setUserLS("recentInteractions",i),Fiverr.setUserLS("interactionsDataDate",Date.now()+2592e5),delete x.data},x.delay)}},t=C,store=t.store,i=D.models,r=t.config,n=T.selectors,window.fNotificationsShared={helpers:G},window.fNotificationDrawer=C,D.init(),a||(T.init(),Fiverr.models.browser.isMobileResponsive||setTimeout(function(){var e=Fiverr.getUserLS("interactionsDataDate");(!e||G.isBeforeNow(e))&&(t.getItems(l),t.getItems(s))},1e3))}(jQuery);